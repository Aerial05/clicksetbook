â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                              â•‘
â•‘        RESCHEDULE TRACKING - PHASE 1 QUICK REFERENCE         â•‘
â•‘                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‚ LOCATION: C:\xampp\htdocs\clicksetbook\migrations\

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ QUICK START (Easiest Method)

   1. Double-click: run_migration.bat
   2. Select option: 1
   3. Enter MySQL password (or just press Enter if none)
   4. Done! âœ“

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ FILES OVERVIEW

   âœ“ add_reschedule_fields.sql        Main migration
   âœ“ rollback_reschedule_fields.sql   Undo migration
   âœ“ setup_migration.ps1              PowerShell script
   âœ“ run_migration.bat                Easy launcher
   âœ“ README_RESCHEDULE_MIGRATION.md   Full docs
   âœ“ PHASE_1_CHECKLIST.md             This checklist

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ—„ï¸ DATABASE CHANGES

   NEW FIELDS (7):
   â€¢ requested_date          â†’ New date user wants
   â€¢ requested_time          â†’ New time user wants
   â€¢ reschedule_reason       â†’ Why they're rescheduling
   â€¢ reschedule_requested_at â†’ When they requested
   â€¢ reschedule_approved_by  â†’ Which admin processed it
   â€¢ reschedule_response_at  â†’ When admin responded
   â€¢ reschedule_status       â†’ pending/approved/declined

   NEW INDEXES (2):
   â€¢ idx_reschedule_request  â†’ Fast filtering
   â€¢ idx_reschedule_dates    â†’ Date/time lookups

   NEW CONSTRAINT (1):
   â€¢ fk_reschedule_approved_by â†’ Links to users table

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… VERIFICATION (Run in phpMyAdmin)

   Check fields:
   DESCRIBE appointments;

   Check indexes:
   SHOW INDEX FROM appointments WHERE Key_name LIKE '%reschedule%';

   Test insert:
   UPDATE appointments 
   SET reschedule_request = 1,
       requested_date = '2025-12-05',
       requested_time = '14:00:00',
       reschedule_status = 'pending'
   WHERE id = 1;

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”„ ROLLBACK (If Needed)

   1. Double-click: run_migration.bat
   2. Select option: 2
   3. Type: yes
   4. Enter password
   5. Reverted! âœ“

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ EXPECTED WORKFLOW

   USER SIDE:
   1. User opens reschedule modal
   2. Selects new date/time
   3. Adds reason (optional)
   4. Clicks "Confirm Reschedule"
   5. Status shows "Reschedule Pending"

   ADMIN SIDE:
   1. Admin sees appointment with badge "ğŸ”„ Reschedule Requested"
   2. Views original vs requested date/time
   3. Clicks "Approve" or "Decline"
   4. User receives notification

   DATABASE FLOW:
   Request  â†’ reschedule_request = 1, status = 'pending'
   Approve  â†’ Update appointment_date/time, status = 'approved'
   Decline  â†’ Keep original date/time, status = 'declined'

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š STATUS TRACKING

   NULL      â†’ No reschedule request
   'pending' â†’ Waiting for admin response
   'approved'â†’ Admin approved the change
   'declined'â†’ Admin rejected the request

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš¦ NEXT STEPS

   After Phase 1 complete:
   
   â˜ Phase 2: Backend API
     â€¢ api/manage-booking.php (user reschedule)
     â€¢ api/admin/appointments.php (approve/decline)
   
   â˜ Phase 3: User Frontend
     â€¢ Connect modal to API
     â€¢ Show pending status
   
   â˜ Phase 4: Admin Frontend
     â€¢ Display reschedule requests
     â€¢ Approve/decline buttons
   
   â˜ Phase 5: Notifications
     â€¢ Send approval/decline emails

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸ IMPORTANT NOTES

   âœ“ Safe to run on production (adds nullable columns)
   âœ“ No data loss risk
   âœ“ Backward compatible with existing code
   âœ“ Can be rolled back if needed
   âœ— Do NOT edit migration files after execution

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ TROUBLESHOOTING

   Error: "Table doesn't exist"
   â†’ Check database name in migration file

   Error: "Column already exists"
   â†’ Migration was already run, use rollback first

   Error: "Access denied"
   â†’ Check MySQL password

   Error: "Foreign key constraint fails"
   â†’ Verify users table exists

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ SUPPORT

   Read: README_RESCHEDULE_MIGRATION.md (detailed guide)
   Check: PHASE_1_CHECKLIST.md (step-by-step)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Date: November 28, 2025
Version: 1.0
Status: READY TO DEPLOY âœ“

â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
